.TH LBDBQ 1
.SH NAME
lbdbq \- query program for the little brother's database
.SH SYNOPSIS
.B lbdbq
.I something
.LP
.B lbdb-fetchaddr
.SH "DESCRIPTION"
This manual page documents briefly the
.BR lbdb
command.
This manual page was written for the Debian GNU/Linux distribution
because the original program does not have a manual page.
.PP
.B lbdbq
will now attempt to invoke various modules to gather information about
persons matching
.I something.
E.g., it may look at a list of
addresses from which you have received mail, it may look at YP maps,
or it may try to finger 
.I something
@<various hosts>.
.PP
The behaviour is configurable: Upon startup, lbdbq will source the
shell scripts
.PP
        /etc/lbdb.rc
.BR
        $HOME/.lbdbrc
.BR
        $HOME/.lbdb/lbdbrc
.BR
        $HOME/.lbdb/rc
.PP
if they exist.
.PP
They can be used to set the following global variables:
.TP
.B MODULE_PATH
Where lbdbq should look for modules
.TP
.B METHODS
What modules to use.
.LP
Note that there _are_ defaults, so you should most
probably modify these variables using contructs like this:
.PP
        MODULE_PATH="MODULE_PATH $HOME/lbdb_modules"
.PP
Additionally, modules may have configuration variables of
their own.
.SH MODULES
Currently, two modules are supplied with lbdb:
.TP
.B m_finger
This module will use finger to find out something more about a person.
The list of hosts do be asked is configurable; use the 
.I M_FINGER_HOSTS
variable. Note that "localhost" will mean an invocation of your local
.BR finger (1)
binary, and should thus work even if you don't provide the finger
service to the network.
.B m_finger
tries to find out the machines mail domain name by parsing a
sendmail.cf file (if it finds one) and by reading /etc/hostname and
/etc/HOSTNAME. You may want to add more methods. See also
/usr/lib/ldbd/lbdb_lib.
.TP
.B m_inmail
This module will look up user name fragments in a list of mail
addresses. To create this list, put the following lines into your
~/.procmailrc:
.br  
  :0hc
.br
  | lbdb-fetchaddr
.br 
This will pipe a copy of every mail message you receive through a
small C program which grabs that message's From: header.
.BR lbdb-fetchaddr
will then construct an address list out of these data. This list is
stored under $HOME/.lbdb/m_inmail.
.PP
Feel free to create your own modules to query LDAP servers, YP maps,
and the like. 
.BR m_finger
should be a good example of how to do it.
.PP
If you create your own modules or have other changes and feel that
they could be helpful for others, don't hesitate to submit them to the 
author for inclusion in later releases.
.PP
Finally, to use
.BR lbdbq
from mutt, add the following line to your ~/.muttrc:
.PP
        set query_command="lbdbq '%s'"
.SH FILES
.I /etc/lbdb.rc
.br
.I $HOME/.lbdbrc
.br
.I $HOME/.lbdb/lbdbrc
.br
.I $HOME/.lbdb/rc
.br
.I /usr/lib/lbdb/*
.SH "SEE ALSO"
.BR finger (1),
.BR mutt (1),
.BR procmail (1),
.BR procmailrc (5)
.SH CREDITS
Most of the really interesting code of this program (namely, the RFC
822 address parser used by lbdb-fetchaddr) was stolen from Michael
Elkins' mutt mail user agent. Additional credits go to Brandon Long
for putting the query functionality into mutt.
.SH AUTHOR
The lbdb package was written by Thomas Roessler <roessler@guug.de>.
.PP
This manual page was written by Roland Rosenfeld
<roland@spinnaker.rhein.de>, for the Debian GNU/Linux system (but may
be used by others).
